<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²½ì œí•™ 1íƒ€ ê°•ì‚¬ - AI ëŒ€ë³¸ ìƒì„±ê¸°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --primary: #f59e0b;
            --primary-dark: #d97706;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --text-primary: #f8fafc;
            --text-muted: #94a3b8;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Pretendard', -apple-system, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            color: var(--text-primary);
        }
        .container-fluid { max-width: 1200px; margin: 0 auto; padding: 30px; }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .back-btn {
            display: flex; align-items: center; gap: 8px;
            color: var(--text-muted);
            text-decoration: none;
        }
        .back-btn:hover { color: white; }
        .page-title {
            display: flex; align-items: center; gap: 12px;
            font-size: 1.5rem; font-weight: 700;
        }
        .title-icon {
            width: 48px; height: 48px;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.3rem;
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }
        .card {
            background: var(--bg-card);
            border-radius: 16px;
            border: none;
        }
        .card-header {
            background: none;
            border-bottom: 1px solid #334155;
            padding: 20px 24px;
            font-weight: 600;
            display: flex; align-items: center; gap: 10px;
        }
        .card-header i { color: var(--primary); }
        .card-body { padding: 24px; }
        
        .form-label {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }
        .form-control, .form-select {
            background: #0f172a;
            border: 1px solid #334155;
            color: white;
            border-radius: 10px;
            padding: 12px 16px;
        }
        .form-control:focus, .form-select:focus {
            background: #0f172a;
            border-color: var(--primary);
            color: white;
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
        }
        .form-control::placeholder { color: #64748b; }
        
        .btn-generate {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border: none;
            color: white;
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            width: 100%;
            margin-top: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn-generate:hover {
            background: linear-gradient(135deg, #d97706, #b45309);
            color: white;
        }
        .btn-generate:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .output-area {
            background: #0f172a;
            border-radius: 12px;
            padding: 20px;
            min-height: 400px;
            max-height: 600px;
            overflow-y: auto;
            white-space: pre-wrap;
            line-height: 1.8;
            font-size: 0.95rem;
        }
        .output-placeholder {
            color: #64748b;
            text-align: center;
            padding-top: 150px;
        }
        .output-placeholder i {
            font-size: 3rem;
            margin-bottom: 16px;
            display: block;
            opacity: 0.5;
        }
        
        .action-btns {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }
        .btn-action {
            flex: 1;
            background: #334155;
            border: none;
            color: white;
            padding: 12px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .btn-action:hover { background: #475569; color: white; }
        .btn-action.primary {
            background: var(--primary);
        }
        .btn-action.primary:hover { background: var(--primary-dark); }
        
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }
        .loading.active { display: block; }
        .spinner {
            width: 48px; height: 48px;
            border: 4px solid #334155;
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .tips {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-top: 20px;
        }
        .tips-title {
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .tips ul {
            margin: 0;
            padding-left: 20px;
            color: var(--text-muted);
            font-size: 0.85rem;
        }
        .tips li { margin-bottom: 4px; }
        
        @media (max-width: 992px) {
            .main-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <header class="header">
            <a href="content-studio.html" class="back-btn">
                <i class="bi bi-arrow-left"></i> ì½˜í…ì¸  ì œì‘ì†Œ
            </a>
            <div class="page-title">
                <div class="title-icon"><i class="bi bi-graph-up-arrow"></i></div>
                ê²½ì œí•™ 1íƒ€ ê°•ì‚¬
            </div>
            <div></div>
        </header>
        
        <div class="main-grid">
            <!-- Input Panel -->
            <div class="card">
                <div class="card-header">
                    <i class="bi bi-sliders"></i> ëŒ€ë³¸ ì„¤ì •
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label class="form-label">ì£¼ì œ *</label>
                        <input type="text" class="form-control" id="topic" placeholder="ì˜ˆ: 2026ë…„ ê¸ˆë¦¬ ì „ë§, ë¶€ë™ì‚° íˆ¬ì ì „ëµ">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">í‚¤ì›Œë“œ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
                        <input type="text" class="form-control" id="keywords" placeholder="ì˜ˆ: ê¸ˆë¦¬, ì¸í”Œë ˆì´ì…˜, ì£¼ì‹">
                    </div>
                    <div class="row">
                        <div class="col-6 mb-3">
                            <label class="form-label">íƒ€ê²Ÿ ì—°ë ¹ëŒ€</label>
                            <select class="form-select" id="targetAge">
                                <option value="30-40ëŒ€">30-40ëŒ€</option>
                                <option value="40-50ëŒ€" selected>40-50ëŒ€</option>
                                <option value="50-60ëŒ€">50-60ëŒ€</option>
                            </select>
                        </div>
                        <div class="col-6 mb-3">
                            <label class="form-label">ëŒ€ë³¸ ê¸¸ì´</label>
                            <select class="form-select" id="length">
                                <option value="short">ìˆí¼ (1-2ë¶„)</option>
                                <option value="medium" selected>ì¤‘ê°„ (5-7ë¶„)</option>
                                <option value="long">ë¡±í¼ (10ë¶„+)</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">í†¤ & ìŠ¤íƒ€ì¼</label>
                        <select class="form-select" id="tone">
                            <option value="urgent">ê¸´ê¸‰í•œ (FOMO ìœ ë°œ)</option>
                            <option value="authoritative" selected>ê¶Œìœ„ìˆëŠ” (ì „ë¬¸ê°€)</option>
                            <option value="friendly">ì¹œê·¼í•œ (ì˜†ì§‘ í˜•)</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">ì¶”ê°€ ìš”ì²­ì‚¬í•­</label>
                        <textarea class="form-control" id="additionalNotes" rows="3" placeholder="íŠ¹ë³„íˆ í¬í•¨í–ˆìœ¼ë©´ í•˜ëŠ” ë‚´ìš©ì´ ìˆë‹¤ë©´ ì ì–´ì£¼ì„¸ìš”"></textarea>
                    </div>
                    
                    <button class="btn-generate" id="generateBtn" onclick="generateScript()">
                        <i class="bi bi-magic"></i> ëŒ€ë³¸ ìƒì„±í•˜ê¸°
                    </button>
                    
                    <div class="tips">
                        <div class="tips-title"><i class="bi bi-lightbulb"></i> íŒ</div>
                        <ul>
                            <li>êµ¬ì²´ì ì¸ ì£¼ì œì¼ìˆ˜ë¡ ë” ì¢‹ì€ ëŒ€ë³¸ì´ ë‚˜ì˜µë‹ˆë‹¤</li>
                            <li>í‚¤ì›Œë“œëŠ” 3-5ê°œê°€ ì ë‹¹í•©ë‹ˆë‹¤</li>
                            <li>ìƒì„±ëœ ëŒ€ë³¸ì€ ìë™ìœ¼ë¡œ RAG ì„œë²„ì— ì €ì¥ë©ë‹ˆë‹¤</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Output Panel -->
            <div class="card">
                <div class="card-header">
                    <i class="bi bi-file-text"></i> ìƒì„±ëœ ëŒ€ë³¸
                </div>
                <div class="card-body">
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        <p>AIê°€ ëŒ€ë³¸ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                        <p style="color: var(--text-muted); font-size: 0.85rem;">ì•½ 30ì´ˆ~1ë¶„ ì†Œìš”</p>
                    </div>
                    <div class="output-area" id="outputArea">
                        <div class="output-placeholder">
                            <i class="bi bi-file-earmark-text"></i>
                            <p>ì™¼ìª½ì—ì„œ ì„¤ì •ì„ ì…ë ¥í•˜ê³ <br>'ëŒ€ë³¸ ìƒì„±í•˜ê¸°' ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”</p>
                        </div>
                    </div>
                    <div class="action-btns">
                        <button class="btn-action" onclick="copyScript()">
                            <i class="bi bi-clipboard"></i> ë³µì‚¬
                        </button>
                        <button class="btn-action" onclick="downloadScript()">
                            <i class="bi bi-download"></i> ë‹¤ìš´ë¡œë“œ
                        </button>
                        <button class="btn-action primary" onclick="saveToRAG()">
                            <i class="bi bi-cloud-upload"></i> RAG ì €ì¥
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let generatedScript = '';
        
        async function generateScript() {
            const topic = document.getElementById('topic').value.trim();
            if (!topic) {
                alert('ì£¼ì œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const keywords = document.getElementById('keywords').value;
            const targetAge = document.getElementById('targetAge').value;
            const length = document.getElementById('length').value;
            const tone = document.getElementById('tone').value;
            const additionalNotes = document.getElementById('additionalNotes').value;
            
            // Show loading
            document.getElementById('loading').classList.add('active');
            document.getElementById('outputArea').style.display = 'none';
            document.getElementById('generateBtn').disabled = true;
            
            try {
                // n8n webhook í˜¸ì¶œ
                const response = await fetch('https://n8n.hyehwa72.org/webhook/economy-script', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        topic,
                        keywords,
                        targetAge,
                        length,
                        tone,
                        additionalNotes
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    generatedScript = data.script || data.content || JSON.stringify(data, null, 2);
                    showOutput(generatedScript);
                } else {
                    throw new Error('ìƒì„± ì‹¤íŒ¨');
                }
            } catch (error) {
                console.error(error);
                // ë°ëª¨ìš© ìƒ˜í”Œ ì¶œë ¥
                generatedScript = `[ê²½ì œí•™ 1íƒ€ ê°•ì‚¬ - ${topic}]

ğŸ¬ ì¸íŠ¸ë¡œ (í›„í‚¹)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
"ì—¬ëŸ¬ë¶„, ì§€ê¸ˆ ì´ ì˜ìƒì„ ì•ˆ ë³´ì‹œë©´ 1ë…„ í›„ í›„íšŒí•˜ì‹¤ ê²ë‹ˆë‹¤."

${topic}ì— ëŒ€í•´ ì•„ì§ë„ ëª¨ë¥´ê³  ê³„ì‹ ë‹¤ë©´, 
ë‹¹ì‹ ì˜ ìì‚°ì€ ì´ë¯¸ ìœ„í—˜ì— ì²˜í•´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ¯ ë³¸ë¡  1: í˜„ì¬ ìƒí™©
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ìµœê·¼ ê²½ì œ ì§€í‘œë¥¼ ë³´ë©´...
[ì—¬ê¸°ì— êµ¬ì²´ì ì¸ ë°ì´í„°ì™€ ë¶„ì„ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤]

ğŸ“Š ë³¸ë¡  2: ì „ë¬¸ê°€ ë¶„ì„
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì œê°€ 20ë…„ê°„ ê²½ì œë¥¼ ë¶„ì„í•´ì˜¨ ê²°ê³¼...
[ê¶Œìœ„ìˆëŠ” ë¶„ì„ê³¼ ì¸ì‚¬ì´íŠ¸]

ğŸ’¡ ê²°ë¡ : ì‹¤ì „ ì „ëµ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì, ê·¸ë˜ì„œ ì—¬ëŸ¬ë¶„ì´ ì§€ê¸ˆ ë‹¹ì¥ í•´ì•¼ í•  ê²ƒì€...
1. ì²« ë²ˆì§¸ ì•¡ì…˜
2. ë‘ ë²ˆì§¸ ì•¡ì…˜
3. ì„¸ ë²ˆì§¸ ì•¡ì…˜

ğŸ”” ì•„ì›ƒíŠ¸ë¡œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì´ ì •ë³´ê°€ ë„ì›€ì´ ë˜ì…¨ë‹¤ë©´ êµ¬ë…ê³¼ ì¢‹ì•„ìš” ë¶€íƒë“œë¦½ë‹ˆë‹¤.
ë‹¤ìŒ ì˜ìƒì—ì„œëŠ” ë” ì‹¬í™”ëœ ë‚´ìš©ìœ¼ë¡œ ì°¾ì•„ëµ™ê² ìŠµë‹ˆë‹¤.

---
â±ï¸ ì˜ˆìƒ ì‹œê°„: 5-7ë¶„
ğŸ¯ íƒ€ê²Ÿ: ${targetAge}
ğŸ“ í‚¤ì›Œë“œ: ${keywords || topic}`;
                showOutput(generatedScript);
            }
        }
        
        function showOutput(text) {
            document.getElementById('loading').classList.remove('active');
            document.getElementById('outputArea').style.display = 'block';
            document.getElementById('outputArea').innerHTML = text;
            document.getElementById('generateBtn').disabled = false;
        }
        
        function copyScript() {
            if (!generatedScript) return alert('ë¨¼ì € ëŒ€ë³¸ì„ ìƒì„±í•´ì£¼ì„¸ìš”!');
            navigator.clipboard.writeText(generatedScript);
            alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        
        function downloadScript() {
            if (!generatedScript) return alert('ë¨¼ì € ëŒ€ë³¸ì„ ìƒì„±í•´ì£¼ì„¸ìš”!');
            const blob = new Blob([generatedScript], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ê²½ì œëŒ€ë³¸_${new Date().toISOString().slice(0,10)}.txt`;
            a.click();
        }
        
        async function saveToRAG() {
            if (!generatedScript) return alert('ë¨¼ì € ëŒ€ë³¸ì„ ìƒì„±í•´ì£¼ì„¸ìš”!');
            
            try {
                const response = await fetch('https://rag.hyehwa72.org/scripts', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        content: generatedScript,
                        metadata: {
                            type: 'economy',
                            topic: document.getElementById('topic').value,
                            created: new Date().toISOString()
                        }
                    })
                });
                
                if (response.ok) {
                    alert('RAG ì„œë²„ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } else {
                    throw new Error('ì €ì¥ ì‹¤íŒ¨');
                }
            } catch (error) {
                alert('ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. RAG ì„œë²„ ìƒíƒœë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.');
            }
        }
    </script>
</body>
</html>
